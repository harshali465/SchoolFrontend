"use strict";(self.webpackChunkhoustonschoolfront=self.webpackChunkhoustonschoolfront||[]).push([[835],{2835:function(e,t,n){n.r(t);var s=n(3433),c=n(1413),r=n(9439),i=n(4165),a=n(5861),l=n(2791),o=n(7689),d=(n(6048),n(8983)),u=n(1243),h=(n(1323),n(6772),n(2957),n(184));t.default=function(){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU",e.next=4,u.Z.get("http://localhost:3001/api/v1/schools/getall",{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU")}});case 4:t=e.sent,console.log(t.data.school),p(t.data.school),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching users:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){e()}),[]);var t=(0,o.s0)(),n=(0,l.useState)([]),x=(0,r.Z)(n,2),f=x[0],p=x[1],m=(0,l.useState)([]),j=(0,r.Z)(m,2),v=j[0],I=(j[1],(0,l.useState)(!1)),b=(0,r.Z)(I,2),N=b[0],y=b[1],Z=(0,l.useState)(!1),k=(0,r.Z)(Z,2),C=k[0],w=k[1],S=(0,l.useState)([]),z=(0,r.Z)(S,2),g=z[0],O=z[1],T=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===(n=(0,s.Z)(f))[t].selected?O([].concat((0,s.Z)(g),[n[t]._id])):O((function(e){return e.filter((function(e){return e!==n[t]._id}))})),n[t].selected=!n[t].selected,p(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU",t.prev=1,t.next=4,u.Z.delete("http://localhost:3001/api/v1/schools/delete",{data:{ids:g},headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU")}});case 4:n=t.sent,console.log(n.data),y(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:e();case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),J=(0,l.useState)(""),M=(0,r.Z)(J,2),U=M[0],Y=M[1],A=(0,l.useState)(""),G=(0,r.Z)(A,2),Q=G[0],R=G[1],X=(0,l.useState)(""),L=(0,r.Z)(X,2),_=L[0],D=(L[1],(0,l.useState)("")),V=(0,r.Z)(D,2),P=V[0],B=V[1],q=(0,l.useState)(""),F=(0,r.Z)(q,2),H=F[0],K=F[1],W=(0,l.useState)(v.length),$=(0,r.Z)(W,2),ee=$[0],te=$[1],ne=(0,l.useState)(1),se=(0,r.Z)(ne,2),ce=se[0],re=se[1],ie=function(e){re(e)},ae=(ce-1)*ee,le=ae+ee,oe=(v.slice(ae,le),Math.ceil(v.length/ee));return(0,h.jsxs)("div",{children:[(0,h.jsxs)(d.Tk,{backdrop:"static",visible:N,onClose:function(){y(!1),O([])},"aria-labelledby":"StaticBackdropExampleLabel",children:[(0,h.jsx)(d.p0,{children:(0,h.jsx)(d.fl,{id:"StaticBackdropExampleLabel",children:"Delete schools"})}),(0,h.jsx)(d.sD,{children:"Are you sure you wish to delete the schools?"}),(0,h.jsxs)(d.Ym,{children:[(0,h.jsx)(d.u5,{color:"secondary",onClick:function(){y(!1),O([])},children:"Close"}),(0,h.jsx)(d.u5,{color:"primary",onClick:function(){return E()},children:"Yes!"})]})]}),(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsxs)("div",{className:"row pb-5",children:[(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("div",{className:"display-6 pb-3 float-end",children:"School listing"})}),(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("button",{className:"btn btn-primary float-end",onClick:function(){t("/addschool")},children:"Add School"})})]}),(0,h.jsxs)("div",{className:"filters d-flex justify-content-between",children:[(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Search by keyword",value:U,onChange:function(e){return Y(e.target.value)}}),(0,h.jsxs)("select",{className:"form-select",value:Q,onChange:function(e){return R(e.target.value)},children:[(0,h.jsx)("option",{value:"",children:"Name of school"}),(0,h.jsx)("option",{children:"Grade 2"}),(0,h.jsx)("option",{children:"Grade 3"}),(0,h.jsx)("option",{children:"Grade 1"})]}),(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Min no of students",value:P,onChange:function(e){return B(e.target.value)}}),(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Max no of students",value:H,onChange:function(e){return K(e.target.value)}})]})]}),(0,h.jsxs)("div",{className:"pb-4 flex-wrap",children:[(0,h.jsx)("button",{className:"btn btn-dark btn-md ",onClick:function(){y(!N)},children:"Delete Selected"}),(0,h.jsx)("button",{className:"btn btn-success btn-md float-end",onClick:function(){var e=f.filter((function(e){return e.selected})),t=[["Name","Class","Division","Behavior Points","Status"]].concat(e.map((function(e){return[e.firstName,e.class,e.division,e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints,e.active?"Active":"Inactive"]}))).map((function(e){return e.join(",")})).join("\n"),n=new Blob([t],{type:"text/csv"}),s=URL.createObjectURL(n),c=document.createElement("a");c.href=s,c.download="selected_students.csv",c.style.display="none",document.body.appendChild(c),c.click(),URL.revokeObjectURL(s),document.body.removeChild(c)},children:"Export to Excel"})]}),(0,h.jsxs)("table",{className:"table table-bordered",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"text-center",children:(0,h.jsx)("input",{type:"checkbox",checked:C,onChange:function(){if(O([]),C)O([]);else{var e=f.map((function(e){return e._id}));O(e)}w(!C),p((function(e){return e.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{selected:!C})}))}))}})}),(0,h.jsx)("th",{className:"text-center",children:"Name of School"}),(0,h.jsx)("th",{className:"text-center",children:"Number of students"}),(0,h.jsx)("th",{className:"text-center",children:"Action"})]})}),(0,h.jsx)("tbody",{children:f.filter((function(e){return function(e){return(""===Q||e.class===Q)&&(""===_||e.division===_)&&(""===P||e.numberOfStudents>=parseInt(P))&&(""===H||e.numberOfStudents<=parseInt(H))}(e)})).map((function(e,n){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-center align-middle",children:(0,h.jsx)("input",{type:"checkbox",checked:e.selected,onChange:function(){return T(n)}})}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.schoolName}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.numberOfStudents}),(0,h.jsxs)("td",{className:"text-center align-middle",children:[(0,h.jsx)("button",{className:"btn btn-primary btn-md",onClick:function(){var n;n=e._id,t("/editschool",{state:{schoolid:n}})},children:"Edit"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md",onClick:function(){O([]),O([e._id]),y(!0)},children:"Delete"})]})]},n)}))})]}),(0,h.jsx)("div",{className:"pagination",children:(0,h.jsxs)(d.E7,{"aria-label":"Page navigation",children:[(0,h.jsx)(d.tn,{onClick:function(){return ie(ce-1)},disabled:1===ce,children:"Previous"}),Array.from({length:oe},(function(e,t){return(0,h.jsx)(d.tn,{active:ce===t+1,onClick:function(){return ie(t+1)},children:t+1},t)})),(0,h.jsx)(d.tn,{onClick:function(){return ie(ce+1)},disabled:ce===Math.ceil(v.length/ee),children:"Next"}),(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(d.tn,{children:"Entries:"}),(0,h.jsx)(d.tn,{children:(0,h.jsxs)("select",{value:ee,onChange:function(e){return te(e.target.value)},children:[(0,h.jsx)("option",{value:"2",children:"2"}),(0,h.jsx)("option",{value:"4",children:"4"}),(0,h.jsx)("option",{value:v.length,children:"all"})]})})]})]})})]})}}}]);
//# sourceMappingURL=835.1e999762.chunk.js.map