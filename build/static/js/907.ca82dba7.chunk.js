"use strict";(self.webpackChunkhoustonschoolfront=self.webpackChunkhoustonschoolfront||[]).push([[907],{3907:function(e,t,n){n.r(t);var a=n(3433),c=n(1413),r=n(9439),s=n(4165),i=n(5861),l=n(2791),o=n(7689),d=(n(6048),n(8983)),u=n(1243),h=(n(1323),n(6772),n(2957),n(184));t.default=function(){var e=localStorage.getItem("accessToken"),t=function(){var t=(0,i.Z)((0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.Z.get("http://18.118.42.224:3001/api/v1/categories",{headers:{Authorization:"Bearer ".concat(e)}});case 3:n=t.sent,console.log(n.data.data.docs),p(n.data.data.docs),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error fetching users:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){t(),F("")}),[]);var n=(0,o.s0)(),x=(0,l.useState)([]),f=(0,r.Z)(x,2),m=f[0],p=f[1],j=(0,l.useState)([]),v=(0,r.Z)(j,2),b=v[0],k=(v[1],(0,l.useState)(!1)),g=(0,r.Z)(k,2),C=g[0],N=g[1],y=(0,l.useState)(!1),Z=(0,r.Z)(y,2),S=Z[0],w=Z[1],A=(0,l.useState)([]),E=(0,r.Z)(A,2),D=E[0],_=E[1],B=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===(n=(0,a.Z)(m))[t].selected?_([].concat((0,a.Z)(D),[n[t]._id])):_((function(e){return e.filter((function(e){return e!==n[t]._id}))})),n[t].selected=!n[t].selected,p(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var n=(0,i.Z)((0,s.Z)().mark((function n(){var a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.delete("http://18.118.42.224:3001/api/v1/categories",{data:{ids:D},headers:{Authorization:"Bearer ".concat(e)}});case 3:a=n.sent,console.log(a.data),N(!1),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:t();case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),z=(0,l.useState)(""),I=(0,r.Z)(z,2),M=I[0],P=I[1],T=(0,l.useState)(""),Y=(0,r.Z)(T,2),q=Y[0],F=Y[1],G=(0,l.useState)(!1),H=(0,r.Z)(G,2),J=(H[0],H[1],(0,l.useState)("")),K=(0,r.Z)(J,2),O=(K[0],K[1],(0,l.useState)("")),Q=(0,r.Z)(O,2),R=(Q[0],Q[1],(0,l.useState)("")),U=(0,r.Z)(R,2),V=(U[0],U[1],(0,l.useState)(b.length)),W=(0,r.Z)(V,2),X=W[0],$=W[1],ee=(0,l.useState)(1),te=(0,r.Z)(ee,2),ne=te[0],ae=te[1],ce=function(e){ae(e)},re=(ne-1)*X,se=re+X,ie=(b.slice(re,se),Math.ceil(b.length/X));return(0,h.jsxs)("div",{children:[(0,h.jsxs)(d.Tk,{backdrop:"static",visible:C,onClose:function(){N(!1),_([])},"aria-labelledby":"StaticBackdropExampleLabel",children:[(0,h.jsx)(d.p0,{children:(0,h.jsx)(d.fl,{id:"StaticBackdropExampleLabel",children:"Delete Category"})}),(0,h.jsx)(d.sD,{children:"Are you sure you wish to delete this category?"}),(0,h.jsxs)(d.Ym,{children:[(0,h.jsx)(d.u5,{color:"secondary",onClick:function(){N(!1),_([])},children:"Close"}),(0,h.jsx)(d.u5,{color:"primary",onClick:function(){return L()},children:"Yes!"})]})]}),(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsxs)("div",{className:"row pb-5",children:[(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("div",{className:"display-6 pb-3 float-end",children:"Category listing"})}),(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("button",{className:"btn btn-primary float-end",onClick:function(){n("/addcategory")},children:"Add Category"})})]}),(0,h.jsx)("div",{className:"filters d-flex",children:(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Search by keyword",value:M,onChange:function(e){return P(e.target.value)}})})]}),(0,h.jsxs)("div",{className:"pb-4 d-flex justify-content-start align-items-center",children:[(0,h.jsx)("div",{className:"p-2 ",children:(0,h.jsx)(d.EC,{type:"radio",id:"flexCheckDefault",label:"Active",checked:""!==q&&!!q,onClick:function(){F(!0)}})}),(0,h.jsx)("div",{className:"p-2",children:(0,h.jsx)(d.EC,{type:"radio",id:"flexCheckDefault",label:"Inactive",checked:""!==q&&!q,onClick:function(){F(!1)}})}),""!==q&&(0,h.jsx)("button",{className:"btn btn-dark btn-md ",onClick:function(){F("")},children:"Show all"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md ",onClick:function(){N(!C)},children:"Delete Selected"})]}),(0,h.jsxs)("table",{className:"table table-bordered",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"text-center",children:(0,h.jsx)("input",{type:"checkbox",checked:S,onChange:function(){if(_([]),S)_([]);else{var e=m.map((function(e){return e._id}));_(e)}w(!S),p((function(e){return e.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{selected:!S})}))}))}})}),(0,h.jsx)("th",{className:"text-center",children:"Name of Category"}),(0,h.jsx)("th",{className:"text-center",children:"Number of Adaats"}),(0,h.jsx)("th",{className:"text-center",children:"Status"}),(0,h.jsx)("th",{className:"text-center",children:"Action"})]})}),(0,h.jsx)("tbody",{children:m.filter((function(e){return function(e){var t=e.name.toLowerCase().includes(M.toLowerCase()),n=""===q||e.active===q;return t&&n}(e)})).map((function(e,t){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-center align-middle",children:(0,h.jsx)("input",{type:"checkbox",checked:e.selected,onChange:function(){return B(t)}})}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.name}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.assignedAadatCount}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.active?"active":"inactive"}),(0,h.jsxs)("td",{className:"text-center align-middle",children:[(0,h.jsx)("button",{className:"btn btn-primary btn-md",onClick:function(){var t;t=e._id,n("/editcategory",{state:{catid:t}})},children:"Edit"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md",onClick:function(){_([]),_([e._id]),N(!0)},children:"Delete"})]})]},t)}))})]}),(0,h.jsx)("div",{className:"pagination",children:(0,h.jsxs)(d.E7,{"aria-label":"Page navigation",children:[(0,h.jsx)(d.tn,{onClick:function(){return ce(ne-1)},disabled:1===ne,children:"Previous"}),Array.from({length:ie},(function(e,t){return(0,h.jsx)(d.tn,{active:ne===t+1,onClick:function(){return ce(t+1)},children:t+1},t)})),(0,h.jsx)(d.tn,{onClick:function(){return ce(ne+1)},disabled:ne===Math.ceil(b.length/X),children:"Next"}),(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(d.tn,{children:"Entries:"}),(0,h.jsx)(d.tn,{children:(0,h.jsxs)("select",{value:X,onChange:function(e){return $(e.target.value)},children:[(0,h.jsx)("option",{value:"2",children:"2"}),(0,h.jsx)("option",{value:"4",children:"4"}),(0,h.jsx)("option",{value:b.length,children:"all"})]})})]})]})})]})}}}]);
//# sourceMappingURL=907.ca82dba7.chunk.js.map