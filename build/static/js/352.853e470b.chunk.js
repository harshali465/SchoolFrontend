"use strict";(self.webpackChunkhoustonschoolfront=self.webpackChunkhoustonschoolfront||[]).push([[352],{3352:function(e,t,n){n.r(t);var s=n(3433),i=n(1413),c=n(9439),a=n(4165),r=n(5861),o=n(2791),l=n(7689),d=(n(6048),n(8983)),u=n(1243),h=(n(1323),n(6772),n(2957),n(184));t.default=function(){var e=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU",e.next=4,u.Z.get("http://localhost:3001/api/v1/users",{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU")},params:{role:"student"}});case 4:t=e.sent,console.log(t),x(t.data.data.docs),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching users:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){e()}),[]);var t=(0,l.s0)(),n=(0,o.useState)([]),I=(0,c.Z)(n,2),p=I[0],x=I[1],v=(0,o.useState)([]),j=(0,c.Z)(v,2),m=j[0],f=(j[1],(0,o.useState)(!1)),N=(0,c.Z)(f,2),b=N[0],Z=N[1],w=(0,o.useState)(!1),y=(0,c.Z)(w,2),z=y[0],C=y[1],k=(0,o.useState)([]),S=(0,c.Z)(k,2),T=S[0],O=S[1],g=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===(n=(0,s.Z)(p))[t].selected?O([].concat((0,s.Z)(T),[n[t]._id])):O((function(e){return e.filter((function(e){return e!==n[t]._id}))})),n[t].selected=!n[t].selected,x(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU",e.prev=1,e.next=4,u.Z.patch("http://localhost:3001/api/v1/users/student",{ids:T,active:!0},{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU")}});case 4:t=e.sent,console.log(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:n=p.map((function(e){return e.selected?(0,i.Z)((0,i.Z)({},e),{},{active:!0}):e})),x(n);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU",e.prev=1,e.next=4,u.Z.patch("http://localhost:3001/api/v1/users/student",{ids:T,active:!1},{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU")}});case 4:t=e.sent,console.log(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:n=p.map((function(e){return e.selected?(0,i.Z)((0,i.Z)({},e),{},{active:!1}):e})),x(n);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var t=(0,r.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU",t.prev=1,t.next=4,u.Z.delete("http://localhost:3001/api/v1/users/student",{data:{ids:T},headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1NGIzNzQxYTRlOTIyNzU1ZTEzZjUwYSIsImlhdCI6MTY5OTQzMjE5NiwiZXhwIjoxNzAyMDI0MTk2fQ.Gn_VwncOvLdq9728FXSIESpmSw8J7Nu5d0AyezbwoOU")}});case 4:n=t.sent,console.log(n.data),Z(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:e();case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),E=(0,o.useState)(""),Y=(0,c.Z)(E,2),A=Y[0],G=Y[1],Q=(0,o.useState)(""),X=(0,c.Z)(Q,2),P=X[0],R=X[1],L=(0,o.useState)(""),V=(0,c.Z)(L,2),D=V[0],_=V[1],B=(0,o.useState)(""),q=(0,c.Z)(B,2),F=q[0],H=q[1],K=(0,o.useState)(""),W=(0,c.Z)(K,2),$=W[0],ee=W[1],te=(0,o.useState)(m.length),ne=(0,c.Z)(te,2),se=ne[0],ie=ne[1],ce=(0,o.useState)(1),ae=(0,c.Z)(ce,2),re=ae[0],oe=ae[1],le=function(e){oe(e)},de=(re-1)*se,ue=de+se,he=(m.slice(de,ue),Math.ceil(m.length/se));return(0,h.jsxs)("div",{children:[(0,h.jsxs)(d.Tk,{backdrop:"static",visible:b,onClose:function(){Z(!1),O([])},"aria-labelledby":"StaticBackdropExampleLabel",children:[(0,h.jsx)(d.p0,{children:(0,h.jsx)(d.fl,{id:"StaticBackdropExampleLabel",children:"Delete students"})}),(0,h.jsx)(d.sD,{children:"Are you sure you wish to delete the student/students?"}),(0,h.jsxs)(d.Ym,{children:[(0,h.jsx)(d.u5,{color:"secondary",onClick:function(){Z(!1),O([])},children:"Close"}),(0,h.jsx)(d.u5,{color:"primary",onClick:function(){return U()},children:"Yes!"})]})]}),(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsxs)("div",{className:"row pb-5",children:[(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("div",{className:"display-6 pb-3 float-end",children:"Student listing"})}),(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("button",{className:"btn btn-primary float-end",onClick:function(){t("/addstudent")},children:"Add student"})})]}),(0,h.jsxs)("div",{className:"filters d-flex justify-content-between",children:[(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Search by keyword",value:A,onChange:function(e){return G(e.target.value)}}),(0,h.jsxs)("select",{className:"form-select",value:P,onChange:function(e){return R(e.target.value)},children:[(0,h.jsx)("option",{value:"",children:"All Classes"}),(0,h.jsx)("option",{children:"Grade 2"}),(0,h.jsx)("option",{children:"Grade 3"}),(0,h.jsx)("option",{children:"Grade 1"})]}),(0,h.jsxs)("select",{className:"form-select",value:D,onChange:function(e){return _(e.target.value)},children:[(0,h.jsx)("option",{value:"",children:"All Divisions"}),(0,h.jsx)("option",{children:"div A"}),(0,h.jsx)("option",{children:"div B"}),(0,h.jsx)("option",{children:"div C"})]}),(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Min Behavior Points",value:F,onChange:function(e){return H(e.target.value)}}),(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Max Behavior Points",value:$,onChange:function(e){return ee(e.target.value)}})]})]}),(0,h.jsxs)("div",{className:"pb-4 flex-wrap",children:[(0,h.jsx)("button",{className:"btn btn-primary btn-md ",onClick:J,children:"Mark Active"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md ",onClick:M,children:"Mark Inactive"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md ",onClick:function(){Z(!b)},children:"Delete Selected"}),(0,h.jsx)("button",{className:"btn btn-success btn-md float-end",onClick:function(){var e=p.filter((function(e){return e.selected})),t=[["Name","Class","Division","Behavior Points","Status"]].concat(e.map((function(e){return[e.firstName,e.class,e.division,e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints,e.active?"Active":"Inactive"]}))).map((function(e){return e.join(",")})).join("\n"),n=new Blob([t],{type:"text/csv"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download="selected_students.csv",i.style.display="none",document.body.appendChild(i),i.click(),URL.revokeObjectURL(s),document.body.removeChild(i)},children:"Export to Excel"})]}),(0,h.jsxs)("table",{className:"table table-bordered",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"text-center",children:(0,h.jsx)("input",{type:"checkbox",checked:z,onChange:function(){if(O([]),z)O([]);else{var e=p.map((function(e){return e._id}));O(e)}C(!z),x((function(e){return e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{selected:!z})}))}))}})}),(0,h.jsx)("th",{className:"text-center",children:"Name"}),(0,h.jsx)("th",{className:"text-center",children:"Class"}),(0,h.jsx)("th",{className:"text-center",children:"Division"}),(0,h.jsx)("th",{className:"text-center",children:"Behavior Points"}),(0,h.jsx)("th",{className:"text-center",children:"Status"}),(0,h.jsx)("th",{className:"text-center",children:"Action"})]})}),(0,h.jsx)("tbody",{children:p.filter((function(e){return function(e){return e.firstName.toLowerCase().includes(A.toLowerCase())&&(""===P||e.class===P)&&(""===D||e.division===D)&&(""===F||e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints>=parseInt(F))&&(""===$||e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints<=parseInt($))}(e)})).map((function(e,n){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-center align-middle",children:(0,h.jsx)("input",{type:"checkbox",checked:e.selected,onChange:function(){return g(n)}})}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.firstName}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.class}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.division}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.active?"active":"inactive"}),(0,h.jsxs)("td",{className:"text-center align-middle",children:[(0,h.jsx)("button",{className:"btn btn-primary btn-md",onClick:function(){var n;n=e._id,t("/editstudent",{state:{studentid:n}})},children:"Edit"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md",onClick:function(){O([]),O([e._id]),Z(!0)},children:"Delete"})]})]},n)}))})]}),(0,h.jsx)("div",{className:"pagination",children:(0,h.jsxs)(d.E7,{"aria-label":"Page navigation",children:[(0,h.jsx)(d.tn,{onClick:function(){return le(re-1)},disabled:1===re,children:"Previous"}),Array.from({length:he},(function(e,t){return(0,h.jsx)(d.tn,{active:re===t+1,onClick:function(){return le(t+1)},children:t+1},t)})),(0,h.jsx)(d.tn,{onClick:function(){return le(re+1)},disabled:re===Math.ceil(m.length/se),children:"Next"}),(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(d.tn,{children:"Entries:"}),(0,h.jsx)(d.tn,{children:(0,h.jsxs)("select",{value:se,onChange:function(e){return ie(e.target.value)},children:[(0,h.jsx)("option",{value:"2",children:"2"}),(0,h.jsx)("option",{value:"4",children:"4"}),(0,h.jsx)("option",{value:m.length,children:"all"})]})})]})]})})]})}}}]);
//# sourceMappingURL=352.853e470b.chunk.js.map