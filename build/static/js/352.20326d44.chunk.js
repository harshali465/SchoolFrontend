"use strict";(self.webpackChunkhoustonschoolfront=self.webpackChunkhoustonschoolfront||[]).push([[352],{3352:function(e,t,n){n.r(t);var s=n(3433),r=n(1413),a=n(9439),c=n(4165),i=n(5861),l=n(2791),o=n(7689),d=(n(6048),n(2937)),u=n(1243),h=(n(1323),n(6772),n(2957),n(184));t.default=function(){var e=localStorage.getItem("accessToken"),t=function(){var t=(0,i.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.Z.get("http://18.118.42.224:3001/api/v1/users",{headers:{Authorization:"Bearer ".concat(e)},params:{role:"student"}});case 3:n=t.sent,console.log(n),f(n.data.data.docs),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error fetching users:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){t()}),[]);var n=(0,o.s0)(),x=(0,l.useState)([]),v=(0,a.Z)(x,2),p=v[0],f=v[1],m=(0,l.useState)([]),j=(0,a.Z)(m,2),b=j[0],k=(j[1],(0,l.useState)(!1)),N=(0,a.Z)(k,2),g=N[0],Z=N[1],C=(0,l.useState)(!1),y=(0,a.Z)(C,2),w=y[0],S=y[1],P=(0,l.useState)([]),A=(0,a.Z)(P,2),B=A[0],E=A[1],L=function(){var e=(0,i.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===(n=(0,s.Z)(p))[t].selected?E([].concat((0,s.Z)(B),[n[t]._id])):E((function(e){return e.filter((function(e){return e!==n[t]._id}))})),n[t].selected=!n[t].selected,f(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var t=(0,i.Z)((0,c.Z)().mark((function t(){var n,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.Z.patch("http://18.118.42.224:3001/api/v1/users/student",{ids:B,active:!0},{headers:{Authorization:"Bearer ".concat(e)}});case 3:n=t.sent,console.log(n.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:s=p.map((function(e){return e.selected?(0,r.Z)((0,r.Z)({},e),{},{active:!0}):e})),f(s);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=(0,i.Z)((0,c.Z)().mark((function t(){var n,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.Z.patch("http://18.118.42.224:3001/api/v1/users/student",{ids:B,active:!1},{headers:{Authorization:"Bearer ".concat(e)}});case 3:n=t.sent,console.log(n.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:s=p.map((function(e){return e.selected?(0,r.Z)((0,r.Z)({},e),{},{active:!1}):e})),f(s);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var n=(0,i.Z)((0,c.Z)().mark((function n(){var s;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.delete("http://18.118.42.224:3001/api/v1/users/student",{data:{ids:B},headers:{Authorization:"Bearer ".concat(e)}});case 3:s=n.sent,console.log(s.data),Z(!1),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:t();case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),I=(0,l.useState)(""),z=(0,a.Z)(I,2),R=z[0],U=z[1],G=(0,l.useState)(""),O=(0,a.Z)(G,2),T=O[0],Y=O[1],q=(0,l.useState)(""),F=(0,a.Z)(q,2),H=F[0],J=F[1],K=(0,l.useState)(""),Q=(0,a.Z)(K,2),V=Q[0],W=Q[1],X=(0,l.useState)(""),$=(0,a.Z)(X,2),ee=$[0],te=$[1],ne=(0,l.useState)(b.length),se=(0,a.Z)(ne,2),re=se[0],ae=se[1],ce=(0,l.useState)(1),ie=(0,a.Z)(ce,2),le=ie[0],oe=ie[1],de=function(e){oe(e)},ue=(le-1)*re,he=ue+re,xe=(b.slice(ue,he),Math.ceil(b.length/re));return(0,h.jsxs)("div",{children:[(0,h.jsxs)(d.Tk,{backdrop:"static",visible:g,onClose:function(){Z(!1),E([])},"aria-labelledby":"StaticBackdropExampleLabel",children:[(0,h.jsx)(d.p0,{children:(0,h.jsx)(d.fl,{id:"StaticBackdropExampleLabel",children:"Delete students"})}),(0,h.jsx)(d.sD,{children:"Are you sure you wish to delete the student/students?"}),(0,h.jsxs)(d.Ym,{children:[(0,h.jsx)(d.u5,{color:"secondary",onClick:function(){Z(!1),E([])},children:"Close"}),(0,h.jsx)(d.u5,{color:"primary",onClick:function(){return _()},children:"Yes!"})]})]}),(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsxs)("div",{className:"row pb-5",children:[(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("div",{className:"display-6 pb-3 float-end",children:"Student listing"})}),(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("button",{className:"btn btn-primary float-end",onClick:function(){n("/addstudent")},children:"Add student"})})]}),(0,h.jsxs)("div",{className:"filters d-flex justify-content-between",children:[(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Search by keyword",value:R,onChange:function(e){return U(e.target.value)}}),(0,h.jsxs)("select",{className:"form-select",value:T,onChange:function(e){return Y(e.target.value)},children:[(0,h.jsx)("option",{value:"",children:"All Classes"}),(0,h.jsx)("option",{children:"Grade 2"}),(0,h.jsx)("option",{children:"Grade 3"}),(0,h.jsx)("option",{children:"Grade 1"})]}),(0,h.jsxs)("select",{className:"form-select",value:H,onChange:function(e){return J(e.target.value)},children:[(0,h.jsx)("option",{value:"",children:"All Divisions"}),(0,h.jsx)("option",{children:"div A"}),(0,h.jsx)("option",{children:"div B"}),(0,h.jsx)("option",{children:"div C"})]}),(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Min Behavior Points",value:V,onChange:function(e){return W(e.target.value)}}),(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Max Behavior Points",value:ee,onChange:function(e){return te(e.target.value)}})]})]}),(0,h.jsxs)("div",{className:"pb-4 flex-wrap",children:[(0,h.jsx)("button",{className:"btn btn-primary btn-md ",onClick:D,children:"Mark Active"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md ",onClick:M,children:"Mark Inactive"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md ",onClick:function(){Z(!g)},children:"Delete Selected"}),(0,h.jsx)("button",{className:"btn btn-success btn-md float-end",onClick:function(){var e=p.filter((function(e){return e.selected})),t=[["Name","Class","Division","Behavior Points","Status"]].concat(e.map((function(e){return[e.firstName,e.class,e.division,e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints,e.active?"Active":"Inactive"]}))).map((function(e){return e.join(",")})).join("\n"),n=new Blob([t],{type:"text/csv"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download="selected_students.csv",r.style.display="none",document.body.appendChild(r),r.click(),URL.revokeObjectURL(s),document.body.removeChild(r)},children:"Export to Excel"})]}),(0,h.jsxs)("table",{className:"table table-bordered",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"text-center",children:(0,h.jsx)("input",{type:"checkbox",checked:w,onChange:function(){if(E([]),w)E([]);else{var e=p.map((function(e){return e._id}));E(e)}S(!w),f((function(e){return e.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{selected:!w})}))}))}})}),(0,h.jsx)("th",{className:"text-center",children:"Name"}),(0,h.jsx)("th",{className:"text-center",children:"Class"}),(0,h.jsx)("th",{className:"text-center",children:"Division"}),(0,h.jsx)("th",{className:"text-center",children:"Behavior Points"}),(0,h.jsx)("th",{className:"text-center",children:"Status"}),(0,h.jsx)("th",{className:"text-center",children:"Action"})]})}),(0,h.jsx)("tbody",{children:p.filter((function(e){return function(e){return e.firstName.toLowerCase().includes(R.toLowerCase())&&(""===T||e.class===T)&&(""===H||e.division===H)&&(""===V||e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints>=parseInt(V))&&(""===ee||e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints<=parseInt(ee))}(e)})).map((function(e,t){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-center align-middle",children:(0,h.jsx)("input",{type:"checkbox",checked:e.selected,onChange:function(){return L(t)}})}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.firstName}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.class}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.division}),(0,h.jsx)("td",{className:"text-center align-middle",children:"400"}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.active?"active":"inactive"}),(0,h.jsxs)("td",{className:"text-center align-middle",children:[(0,h.jsx)("button",{className:"btn btn-primary btn-md",onClick:function(){var t;t=e._id,n("/editstudent",{state:{studentid:t}})},children:"Edit"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md",onClick:function(){E([]),E([e._id]),Z(!0)},children:"Delete"})]})]},t)}))})]}),(0,h.jsx)("div",{className:"pagination",children:(0,h.jsxs)(d.E7,{"aria-label":"Page navigation",children:[(0,h.jsx)(d.tn,{onClick:function(){return de(le-1)},disabled:1===le,children:"Previous"}),Array.from({length:xe},(function(e,t){return(0,h.jsx)(d.tn,{active:le===t+1,onClick:function(){return de(t+1)},children:t+1},t)})),(0,h.jsx)(d.tn,{onClick:function(){return de(le+1)},disabled:le===Math.ceil(b.length/re),children:"Next"}),(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(d.tn,{children:"Entries:"}),(0,h.jsx)(d.tn,{children:(0,h.jsxs)("select",{value:re,onChange:function(e){return ae(e.target.value)},children:[(0,h.jsx)("option",{value:"2",children:"2"}),(0,h.jsx)("option",{value:"4",children:"4"}),(0,h.jsx)("option",{value:b.length,children:"all"})]})})]})]})})]})}}}]);
//# sourceMappingURL=352.20326d44.chunk.js.map