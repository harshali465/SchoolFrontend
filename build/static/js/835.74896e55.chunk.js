"use strict";(self.webpackChunkhoustonschoolfront=self.webpackChunkhoustonschoolfront||[]).push([[835],{2835:function(e,t,n){n.r(t);var s=n(3433),c=n(1413),r=n(9439),a=n(4165),o=n(5861),l=n(2791),i=n(7689),u=(n(6048),n(2937)),d=n(1243),h=(n(1323),n(6772),n(2957),n(184));t.default=function(){var e=localStorage.getItem("accessToken"),t=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.Z.get("http://18.118.42.224:3001/api/v1/schools/getall",{headers:{Authorization:"Bearer ".concat(e)}});case 3:n=t.sent,console.log(n.data.school),p(n.data.school),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error fetching users:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){t()}),[]);var n=(0,i.s0)(),f=(0,l.useState)([]),x=(0,r.Z)(f,2),m=x[0],p=x[1],v=(0,l.useState)([]),j=(0,r.Z)(v,2),b=j[0],N=(j[1],(0,l.useState)(!1)),g=(0,r.Z)(N,2),k=g[0],Z=g[1],y=(0,l.useState)(!1),C=(0,r.Z)(y,2),S=C[0],w=C[1],E=(0,l.useState)([]),L=(0,r.Z)(E,2),A=L[0],P=L[1],B=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===(n=(0,s.Z)(m))[t].selected?P([].concat((0,s.Z)(A),[n[t]._id])):P((function(e){return e.filter((function(e){return e!==n[t]._id}))})),n[t].selected=!n[t].selected,p(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(){var s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.Z.delete("http://18.118.42.224:3001/api/v1/schools/delete",{data:{ids:A},headers:{Authorization:"Bearer ".concat(e)}});case 3:s=n.sent,console.log(s.data),Z(!1),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:t();case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),D=(0,l.useState)(""),O=(0,r.Z)(D,2),I=O[0],M=O[1],R=(0,l.useState)(""),U=(0,r.Z)(R,2),z=U[0],T=U[1],Y=(0,l.useState)(""),q=(0,r.Z)(Y,2),F=q[0],G=(q[1],(0,l.useState)("")),H=(0,r.Z)(G,2),J=H[0],K=H[1],Q=(0,l.useState)(""),V=(0,r.Z)(Q,2),W=V[0],X=V[1],$=(0,l.useState)(b.length),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],se=(0,l.useState)(1),ce=(0,r.Z)(se,2),re=ce[0],ae=ce[1],oe=function(e){ae(e)},le=(re-1)*te,ie=le+te,ue=(b.slice(le,ie),Math.ceil(b.length/te));return(0,h.jsxs)("div",{children:[(0,h.jsxs)(u.Tk,{backdrop:"static",visible:k,onClose:function(){Z(!1),P([])},"aria-labelledby":"StaticBackdropExampleLabel",children:[(0,h.jsx)(u.p0,{children:(0,h.jsx)(u.fl,{id:"StaticBackdropExampleLabel",children:"Delete schools"})}),(0,h.jsx)(u.sD,{children:"Are you sure you wish to delete the schools?"}),(0,h.jsxs)(u.Ym,{children:[(0,h.jsx)(u.u5,{color:"secondary",onClick:function(){Z(!1),P([])},children:"Close"}),(0,h.jsx)(u.u5,{color:"primary",onClick:function(){return _()},children:"Yes!"})]})]}),(0,h.jsxs)("div",{className:"mb-2",children:[(0,h.jsxs)("div",{className:"row pb-5",children:[(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("div",{className:"display-6 pb-3 float-end",children:"School listing"})}),(0,h.jsx)("div",{className:"col-md-6 ",children:(0,h.jsx)("button",{className:"btn btn-primary float-end",onClick:function(){n("/addschool")},children:"Add School"})})]}),(0,h.jsxs)("div",{className:"filters d-flex justify-content-between",children:[(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Search by keyword",value:I,onChange:function(e){return M(e.target.value)}}),(0,h.jsxs)("select",{className:"form-select",value:z,onChange:function(e){return T(e.target.value)},children:[(0,h.jsx)("option",{value:"",children:"Show all schools"}),m.map((function(e){return(0,h.jsx)("option",{children:e.schoolName})}))]}),(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Min no of students",value:J,onChange:function(e){return K(e.target.value)}}),(0,h.jsx)("input",{className:"form-control",type:"text",placeholder:"Max no of students",value:W,onChange:function(e){return X(e.target.value)}})]})]}),(0,h.jsxs)("div",{className:"pb-4 flex-wrap",children:[(0,h.jsx)("button",{className:"btn btn-dark btn-md ",onClick:function(){Z(!k)},children:"Delete Selected"}),(0,h.jsx)("button",{className:"btn btn-success btn-md float-end",onClick:function(){var e=m.filter((function(e){return e.selected})),t=[["Name","Class","Division","Behavior Points","Status"]].concat(e.map((function(e){return[e.firstName,e.class,e.division,e.behaviousPoints.positivePoints-e.behaviousPoints.negativePoints,e.active?"Active":"Inactive"]}))).map((function(e){return e.join(",")})).join("\n"),n=new Blob([t],{type:"text/csv"}),s=URL.createObjectURL(n),c=document.createElement("a");c.href=s,c.download="selected_students.csv",c.style.display="none",document.body.appendChild(c),c.click(),URL.revokeObjectURL(s),document.body.removeChild(c)},children:"Export to Excel"})]}),(0,h.jsxs)("table",{className:"table table-bordered",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"text-center",children:(0,h.jsx)("input",{type:"checkbox",checked:S,onChange:function(){if(P([]),S)P([]);else{var e=m.map((function(e){return e._id}));P(e)}w(!S),p((function(e){return e.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{selected:!S})}))}))}})}),(0,h.jsx)("th",{className:"text-center",children:"Name of School"}),(0,h.jsx)("th",{className:"text-center",children:"Number of students"}),(0,h.jsx)("th",{className:"text-center",children:"Action"})]})}),(0,h.jsx)("tbody",{children:m.filter((function(e){return function(e){return e.schoolName.toLowerCase().includes(I.toLowerCase())&&(""===z||e.schoolName===z)&&(""===F||e.division===F)&&(""===J||e.numberOfStudents>=parseInt(J))&&(""===W||e.numberOfStudents<=parseInt(W))}(e)})).map((function(e,t){return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:"text-center align-middle",children:(0,h.jsx)("input",{type:"checkbox",checked:e.selected,onChange:function(){return B(t)}})}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.schoolName}),(0,h.jsx)("td",{className:"text-center align-middle",children:e.numberOfStudents}),(0,h.jsxs)("td",{className:"text-center align-middle",children:[(0,h.jsx)("button",{className:"btn btn-primary btn-md",onClick:function(){var t;t=e._id,n("/editschool",{state:{schoolid:t}})},children:"Edit"}),(0,h.jsx)("button",{className:"btn btn-dark btn-md",onClick:function(){P([]),P([e._id]),Z(!0)},children:"Delete"})]})]},t)}))})]}),(0,h.jsx)("div",{className:"pagination",children:(0,h.jsxs)(u.E7,{"aria-label":"Page navigation",children:[(0,h.jsx)(u.tn,{onClick:function(){return oe(re-1)},disabled:1===re,children:"Previous"}),Array.from({length:ue},(function(e,t){return(0,h.jsx)(u.tn,{active:re===t+1,onClick:function(){return oe(t+1)},children:t+1},t)})),(0,h.jsx)(u.tn,{onClick:function(){return oe(re+1)},disabled:re===Math.ceil(b.length/te),children:"Next"}),(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(u.tn,{children:"Entries:"}),(0,h.jsx)(u.tn,{children:(0,h.jsxs)("select",{value:te,onChange:function(e){return ne(e.target.value)},children:[(0,h.jsx)("option",{value:"2",children:"2"}),(0,h.jsx)("option",{value:"4",children:"4"}),(0,h.jsx)("option",{value:b.length,children:"all"})]})})]})]})})]})}}}]);
//# sourceMappingURL=835.74896e55.chunk.js.map